const fakeData = {
	status: true,
	data: [
		{
			url: "http://localhost:5000/task-fully-objectively-seize-scalable-metrics.html",
			title: "Task Fully Objectively Seize Scalable Metrics",
			description:
				"\n    Task Fully Objectively Seize Scalable Metrics\n\n\n    Task Fully Objectively Seize Scalable Metrics\n    \n    Technologies. Objectively processes and tactical architectures. High-yield alignments Enthusiastically engage fully. The digital value added activity to. Enterprise-wide innovation. matrix economically sound value. Interoperable meta-services. Globally harness multimedia based. Ball while iterate covalent strategic theme areas via accurate e-markets. Quality vectors competencies vis-a-",
		},
		{
			url: "http://localhost:5000/to-ensure-digital-divide.html",
			title: "To Ensure Digital Divide",
			description:
				"\n    To Ensure Digital Divide\n\n\n    To Ensure Digital Divide\n    \n    On the emerging core competencies vis-a-vis impactful. Top-line potentialities. engage market-driven intellectual capital. Deliverables. low-risk high-yield alignments before transparent e-tailers. Infomediaries via and user-centric intellectual capital. Collaboratively unleash market-driven. Premium technologies for cross-platform models. Continually reintermediate integrated processes through technically sound intellectual c",
		},
		{
			url: "http://localhost:5000/globally-myocardinate-sustainable-potentialities.html",
			title: "Globally Myocardinate Sustainable Potentialities.",
			description:
				"\n    Globally Myocardinate Sustainable Potentialities.\n\n\n    Globally Myocardinate Sustainable Potentialities.\n    \n    Intellectual capital with functionalized infrastructures. Interactively productize premium technologies whereas interdependent. Quickly communicate for customized technologies. Objectively integrate emerging core competencies vis-a-vis. Intellectual capital a deep dive on the bottom line. Open-source infrastructures embrace empowered e-business after user friendly intellectual ",
		},
		{
			url: "http://localhost:5000/potentialities-progressively-the-day%2C-going.html",
			title: "Potentialities. Progressively The Day, Going",
			description:
				"\n    Potentialities. Progressively The Day, Going\n\n\n    Potentialities. Progressively The Day, Going\n    \n    High-payoff intellectual for state of the day, going forward, a new normal that. Procedures whereas leading-edge intellectual capital. Interactively actualize front-end processes with effective convergence. Synergistically. Offline to Progressively plagiarize resource-leveling e-commerce through resource-leveling core competencies. Dramatically mesh low-risk. Leverage other touchpoints f",
		},
		{
			url: "http://localhost:5000/e-commerce-via-ball-while.html",
			title: "E-Commerce Via Ball While",
			description:
				'\n    E-Commerce Via Ball While\n\n\n    E-Commerce Via Ball While\n    \n    Base portals fashion wireless leadership rather. Cultivate one-to-one Holistically pontificate installed base benefits. Dramatically visualize customer directed convergence without revolutionary. "organic" sources. Dynamically target high-payoff intellectual capital for. Domination. At applications after client-centric infomediaries. Phosfluorescently engage worldwide methodologies with web-enabled technology. Interactively.',
		},
		{
			url: "http://localhost:5000/loop-on-maintain-clicks-and-mortar-solutions-without.html",
			title: "Loop On Maintain Clicks-And-Mortar Solutions Without",
			description:
				'\n    Loop On Maintain Clicks-And-Mortar Solutions Without\n\n\n    Loop On Maintain Clicks-And-Mortar Solutions Without\n    \n    New normal. Credibly innovate granular internal or "organic" sources. Credibly reintermediate backend. Incubate standards methodologies with web-enabled. Professionally fashion methods of empowerment whereas distributed expertise. Core competencies. synergize scalable e-commerce rather than client-centric data. Dynamically target high-payoff. Channels whereas world-class ',
		},
		{
			url: "http://localhost:5000/core-competencies-via-open-source.html",
			title: "Core Competencies. Via Open-Source",
			description:
				'\n    Core Competencies. Via Open-Source\n\n\n    Core Competencies. Via Open-Source\n    \n    Before transparent and interoperable internal or "organic" sources whereas high standards in web-readiness. Energistically scale. E-tailers. Objectively change management inside of workflows to establish a. Via inexpensive timely deliverables for. ROI. customer directed convergence without revolutionary ROI. Efficiently. Applications through Quickly incentivize impactful action items before. Through robust ',
		},
		{
			url: "http://localhost:5000/on-focusing-to-corporate-strategy-foster.html",
			title: "On Focusing To Corporate Strategy Foster",
			description:
				"\n    On Focusing To Corporate Strategy Foster\n\n\n    On Focusing To Corporate Strategy Foster\n    \n    Dramatically synthesize impactful action items before tactical. Overviews. Iterative Professionally fashion wireless. Standards compliant Dramatically disseminate standardized metrics after. Communicate enabled whereas tactical paradigms. Compellingly reconceptualize compelling outsourcing whereas optimal customer service. Professionally. After plug-and-play in time catalysts for change. Seamles",
		},
		{
			url: "http://localhost:5000/revolutionary-meta-services-enthusiastically-leverage-existing.html",
			title: "Revolutionary Meta-Services Enthusiastically Leverage Existing",
			description:
				"\n    Revolutionary Meta-Services Enthusiastically Leverage Existing\n\n\n    Revolutionary Meta-Services Enthusiastically Leverage Existing\n    \n    Products after open-source infrastructures via inexpensive materials. Objectively innovate empowered manufactured. Meta-services and process-centric communities. Dramatically evisculate. With optimal just in time initiatives. Quickly. Whereas parallel scalable customer service. Vertical architectures. after installed base benefits. Dramatically visuali",
		},
		{
			url: "http://localhost:5000/capitalize-on-enthusiastically-leverage.html",
			title: "Capitalize On Enthusiastically Leverage",
			description:
				"\n    Capitalize On Enthusiastically Leverage\n\n\n    Capitalize On Enthusiastically Leverage\n    \n    Vectors. Globally build backward-compatible relationships whereas tactical paradigms. Compellingly reconceptualize compelling outsourcing whereas. Predominate extensible idea-sharing. Monotonically engage market-driven intellectual capital through. Premium technologies indicators offline to maximise the long tail. Keeping your eye on. An expanded before scalable benefits. Quickly disseminate. Vert",
		},
		{
			url: "http://localhost:5000/engage-high-payoff-have-multiple-touchpoints-for.html",
			title: "Engage High-Payoff Have Multiple Touchpoints For",
			description:
				"\n    Engage High-Payoff Have Multiple Touchpoints For\n\n\n    Engage High-Payoff Have Multiple Touchpoints For\n    \n    Performing a strategies. Seamlessly visualize quality intellectual capital for. Parallel task array of niche markets through robust products. Appropriately. B2C users than high standards in e-services. Assertively iterate resource maximizing. Cross-unit benefits Quickly aggregate B2B users and worldwide potentialities. Progressively. Strategic web-readiness. infomediaries. Phosfl",
		},
		{
			url: "http://localhost:5000/to-further-grow-the.html",
			title: "To Further Grow The",
			description:
				"\n    To Further Grow The\n\n\n    To Further Grow The\n    \n    Innovation. Phosfluorescently agile frameworks to provide a robust synopsis for high level. Whereas high without cross-media value. Quickly maximize timely deliverables for real-time schemas. Without cross-media after client-centric infomediaries. Phosfluorescently expedite impactful. Architectures. client-centric data. Dynamically. Turnkey leadership identify a ballpark value added activity to beta test. Override the. Information witho",
		},
		{
			url: "http://localhost:5000",
			title: "",
			description:
				"\nProactive E-Services. Thinking WithStrategic Web-Readiness. Standardized Metrics AfterIdea-Sharing. Proactively E-Services. Assertively IterateFashion Wireless Leverage Others Enterprise-WideEfficiently Initiate Vis-A-Vis Cost EffectiveImpactful Action Optimal Networks.Extensive Infomediaries Materials Via Effective E-Business.Service. Professionally Before Process-Centric Communities.Internal Or Scalable Benefits. Quickly DisseminateChannels Before Optimal TestingTo Beta Iterative ApproachesSo",
		},
		{
			url: "http://localhost:5000/channels-before-optimal-testing.html",
			title: "Channels Before Optimal Testing",
			description:
				"\n    Channels Before Optimal Testing\n\n\n    Channels Before Optimal Testing\n    \n    Administrate empowered will have multiple touchpoints for offshoring. Capitalize on low hanging. Credibly strategies to ensure proactive domination. At the end. Capital. Interactively e-business collaboration and idea-sharing. Products and Credibly pontificate highly efficient manufactured products and enabled. View of competencies vis-a-vis impactful experiences. Dramatically synthesize. Further the Completely s",
		},
		{
			url: "http://localhost:5000/coordinate-proactive-leverage.html",
			title: "Coordinate Proactive. Leverage",
			description:
				'\n    Coordinate Proactive. Leverage\n\n\n    Coordinate Proactive. Leverage\n    \n    Cultivate optimal products. Appropriately implement visionary e-services vis-a-vis strategic web-readiness. Taking seamless runway heading towards a streamlined. Enabled sources and idea-sharing. Holistically pontificate installed base portals. Revolutionize global capital. Collaboratively unleash market-driven "outside the box" thinking for. Via workplace market-driven "outside the box" thinking with. Alignments. ',
		},
		{
			url: "http://localhost:5000/results-holistically-base-benefits-dramatically-visualize.html",
			title: "Results. Holistically Base Benefits. Dramatically Visualize",
			description:
				"\n    Results. Holistically Base Benefits. Dramatically Visualize\n\n\n    Results. Holistically Base Benefits. Dramatically Visualize\n    \n    World-class applications cloud solution. User generated content in real-time will have multiple. Pursue diverse unleash cross-media information. Multiple touchpoints just in time catalysts for change for interoperable meta-services. 2.0 technologies your eye on the runway heading towards a streamlined cloud solution. User. 2.0 technologies the start-up menta",
		},
		{
			url: "http://localhost:5000/alignments-dramatically-scale-future-proof-core-competencies.html",
			title: "Alignments. Dramatically Scale Future-Proof Core Competencies",
			description:
				"\n    Alignments. Dramatically Scale Future-Proof Core Competencies\n\n\n    Alignments. Dramatically Scale Future-Proof Core Competencies\n    \n    Backward-compatible data. transparent e-tailers. Appropriately empower. Impactful action Credibly reintermediate backend ideas for cross-platform models. Continually reintermediate integrated. Backend products. Quickly coordinate e-business applications through revolutionary catalysts for change?. Efficiently unleash capital. Holistically foster superior",
		},
		{
			url: "http://localhost:5000/incubate-standards-whereas-interdependent.html",
			title: "Incubate Standards Whereas Interdependent",
			description:
				"\n    Incubate Standards Whereas Interdependent\n\n\n    Incubate Standards Whereas Interdependent\n    \n    Administrate empowered enterprise-wide strategic theme areas. Scalable benefits. embrace empowered e-business after user friendly intellectual capital. Interactively actualize. E-markets. Holistically generate open-source applications through. After plug-and-play market-driven opportunities and real-time potentialities. Appropriately communicate. Whereas virtual wireless testing procedures. Co",
		},
		{
			url: "http://localhost:5000/e-business-applications-a-robust.html",
			title: "E-Business Applications A Robust",
			description:
				"\n    E-Business Applications A Robust\n\n\n    E-Business Applications A Robust\n    \n    Existing premium offshoring. Capitalize on low hanging fruit to identify a ballpark. Rapaciously seize sources whereas high standards in e-services. Assertively iterate. Implement visionary customer service with. Extensible niches. methods of empowerment whereas distributed expertise. Transparent e-tailers. enable accurate supply chains via focused results. Holistically generate open-source applications. Seamle",
		},
		{
			url: "http://localhost:5000/collaboration-and-for-real-time-schemas.html",
			title: "Collaboration And For Real-Time Schemas.",
			description:
				"\n    Collaboration And For Real-Time Schemas.\n\n\n    Collaboration And For Real-Time Schemas.\n    \n    Appropriately user friendly intellectual capital. Holistically foster superior methodologies without market-driven best. Competencies before cutting-edge deliverables. Proactively envisioned multimedia based expertise. Globally network clicks-and-mortar catalysts for change. Manufactured products innovate empowered manufactured. Sources and via client-focused results. Quickly incentivize impactf",
		},
		{
			url: "http://localhost:5000/impactful-action-optimal-networks.html",
			title: "Impactful Action Optimal Networks.",
			description:
				"\n    Impactful Action Optimal Networks.\n\n\n    Impactful Action Optimal Networks.\n    \n    Scalable benefits. focused materials vis-a-vis cost effective manufactured products. Phosfluorescently engage worldwide. Fashion wireless architectures. Credibly reintermediate backend ideas for. B2C users to the table win-win survival strategies to ensure proactive domination. At the end. Technically sound Efficiently myocardinate market-driven innovation via open-source alignments. Dramatically engage top",
		},
		{
			url: "http://localhost:5000/worldwide-methodologies-iterate-covalent-strategic.html",
			title: "Worldwide Methodologies Iterate Covalent Strategic",
			description:
				'\n    Worldwide Methodologies Iterate Covalent Strategic\n\n\n    Worldwide Methodologies Iterate Covalent Strategic\n    \n    Revolutionary meta-services vis-a-vis impactful experiences. Dramatically synthesize integrated schemas with. After maintainable Organically grow the holistic world view of disruptive innovation via. Deliverables. forward, a new normal that has evolved from generation X is. "outside the empowerment. Bring to the table. Override the applications. Quickly drive clicks-and-morta',
		},
		{
			url: "http://localhost:5000/inexpensive-materials-processes-with.html",
			title: "Inexpensive Materials. Processes With",
			description:
				'\n    Inexpensive Materials. Processes With\n\n\n    Inexpensive Materials. Processes With\n    \n    Results. Holistically Quickly disseminate superior deliverables whereas web-enabled applications. Quickly drive clicks-and-mortar catalysts for change. Reintermediate backend the box" thinking. Completely pursue scalable. Override the data and enterprise. Empowered markets through bleeding-edge sources. Resource taxing e-business collaboration and idea-sharing. Proactively leverage. Just in quality ve',
		},
	],
};

const getData = (data) => {
	return data.map((d) => {
		return `<div class="item">
		<div class="link">${d.url}</div>
		<div class="title">
			<a href="${d.url}">
			${d.title ? d.title : d.url}
			</a>
		</div>
		<div class="descp">${d.description}</div>
	</div>`;
	});
};

const start = async () => {
	const urlSearchParams = new URLSearchParams(window.location.search);
	const params = Object.fromEntries(urlSearchParams.entries());

	document.getElementById("search-input").value = params.search;

	let timeStart = Date.now();
	let resp = await axios.get("/search/" + params.search);
	let timeEnd = Date.now();
	let { data } = resp;
	data = data.data;
	console.log(data);

	document.getElementById("main-data").innerHTML = getData(data);
	document.getElementById("time-taken").innerHTML = `Found ${
		data.length
	} results in ${(timeEnd - timeStart) / 1000} s`;
};
window.addEventListener("load", (event) => {
	console.log("page is fully loaded");
	start();
	autocomplete(document.getElementById("search-input"));
	loadNewPage();
});

function autocomplete(inp) {
	var currentFocus;
	inp.addEventListener("input", async function (e) {
		var a,
			b,
			i,
			val = this.value;
		let { data } = await axios.post("/words/" + val);
		data = data.data;
		arr = data.slice(0, 30);
		closeAllLists();
		if (!val) {
			return false;
		}
		currentFocus = -1;
		a = document.createElement("DIV");
		a.setAttribute("id", this.id + "autocomplete-list");
		a.setAttribute("class", "autocomplete-items");
		console.log(a);
		this.parentNode.appendChild(a);
		for (i = 0; i < arr.length; i++) {
			if (arr[i].substr(0, val.length).toUpperCase() == val.toUpperCase()) {
				b = document.createElement("DIV");
				b.innerHTML = "<strong>" + arr[i].substr(0, val.length) + "</strong>";
				b.innerHTML += arr[i].substr(val.length);
				b.innerHTML += "<input type='hidden' value='" + arr[i] + "'>";
				b.addEventListener("click", function (e) {
					inp.value = this.getElementsByTagName("input")[0].value;
					closeAllLists();
				});
				a.appendChild(b);
			}
		}
	});
	inp.addEventListener("keydown", function (e) {
		var x = document.getElementById(this.id + "autocomplete-list");
		if (x) x = x.getElementsByTagName("div");
		if (e.keyCode == 40) {
			currentFocus++;
			addActive(x);
		} else if (e.keyCode == 38) {
			currentFocus--;
			addActive(x);
		} else if (e.keyCode == 13) {
			e.preventDefault();
			if (currentFocus > -1) {
				if (x) x[currentFocus].click();
			}
		}
	});

	function addActive(x) {
		if (!x) return false;
		removeActive(x);
		if (currentFocus >= x.length) currentFocus = 0;
		if (currentFocus < 0) currentFocus = x.length - 1;
		x[currentFocus].classList.add("autocomplete-active");
	}

	function removeActive(x) {
		for (var i = 0; i < x.length; i++) {
			x[i].classList.remove("autocomplete-active");
		}
	}

	function closeAllLists(elmnt) {
		var x = document.getElementsByClassName("autocomplete-items");
		for (var i = 0; i < x.length; i++) {
			if (elmnt != x[i] && elmnt != inp) {
				x[i].parentNode.removeChild(x[i]);
			}
		}
	}
	document.addEventListener("click", function (e) {
		closeAllLists(e.target);
	});
}

function loadNewPage() {
	document.getElementById("search-form").addEventListener("submit", (e) => {
		e.preventDefault();
		const value = document.getElementById("search-input").value;
		const a = document.createElement("a");
		a.href = "/result?search=" + value;
		a.click();
	});
}
